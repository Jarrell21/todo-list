(()=>{"use strict";const t=(t,e)=>{const o=()=>t,s=()=>e;return{getTitle:o,setTitle:e=>{t=e},getDate:s,setDate:t=>{e=t},toJSON:()=>({title:o(),dueDate:s()}),getDateFormatted:()=>{const t=e.split("-")[0];return`${e.split("-")[1]}/${e.split("-")[2]}/${t}`}}},e=t=>{const e=()=>t;let o=[];const s=()=>o;return{toJSON:()=>({projectName:e(),tasks:s()}),setTasks:t=>{o=t},getName:e,setName:e=>{t=e},getTasks:s,addTask:t=>{o.push(t)}}},o={getTodoList:()=>{const o=Object.assign((()=>{let t=[];t.push(e("Home")),t.push(e("Today")),t.push(e("This week"));const o=()=>t;return{toJSON:()=>({projects:o()}),getProjects:o,getProject:e=>t.find((t=>t.getName()===e)),addProject:e=>{t.push(e)},setProjects:e=>{t=e}}})(),JSON.parse(localStorage.getItem("todoList")));return null!==localStorage.getItem("todoList")?(o.setProjects(o.projects.map((t=>Object.assign(e(),t)))),o.getProjects().forEach((t=>t.setName(t.projectName))),o.getProjects().forEach((e=>{e.setTasks(e.tasks.map((e=>Object.assign(t(),e))))})),o.getProjects().forEach((t=>{t.getTasks().forEach((t=>{t.setTitle(t.title),t.setDate(t.dueDate)}))}))):(o.setProjects(o.getProjects().map((t=>Object.assign(e(),t)))),o.getProjects().forEach((e=>e.setTasks(e.getTasks().map((e=>Object.assign(t(),e))))))),o},saveTodoList:t=>{localStorage.setItem("todoList",JSON.stringify(t))},addTask:(t,e)=>{const s=o.getTodoList();s.getProject(t).addTask(e),o.saveTodoList(s)},addProject:t=>{const e=o.getTodoList();e.addProject(t),o.saveTodoList(e)}},s=o,n={loadHomePage:()=>{n.loadProjects(),n.initAddProjectButtons(),n.openProject("Home",document.getElementById("home-btn"))},loadProjectContent:t=>{const e=document.querySelector("#content");e.innerHTML=`\n        <div id="content-title">${t}</div>\n        <div id="content-body">\n          <div class="tasks-list"></div>`,"Today"!==t&&"This week"!==t&&(e.innerHTML+='\n                <button class="add-task-btn">\n                  Add Task\n                </button>\n                <div class="task-popup" style="display: none">\n                  <input placeholder="Title" class="task-popup-title">\n                  <input type="date" class="task-popup-date">\n                  <div class="task-popup-btns">\n                    <button class="task-popup-add-btn">\n                      ADD\n                    </button>\n                    <button class="task-popup-cancel-btn">\n                      CANCEL\n                    </button>\n                  </div>\n                </div>\n              </div>'),n.loadTasks(t)},addTask:()=>{const e=document.querySelector("#content-title").textContent,o=document.querySelector(".task-popup-title").value,c=document.querySelector(".task-popup-date").value,a=t(o,c);""!==o&&""!==c?(s.addTask(e,a),n.closeTaskPopup(),n.createNewTask(a)):alert("Fields must be complete")},createNewTask:t=>{document.querySelector(".tasks-list").innerHTML+=`\n      <div class="task">\n        <input type="checkbox">\n        <p>${t.getTitle()}</p>\n        <p>${t.getDateFormatted()}</p>\n        <button>X</button>\n      </div>\n      `},loadTasks:t=>{s.getTodoList().getProject(t).getTasks().forEach((t=>{n.createNewTask(t)})),"Today"!==t&&"This week"!==t&&n.initAddTaskButtons()},openTaskPopup:()=>{const t=document.querySelector(".add-task-btn"),e=document.querySelector(".task-popup");t.style.display="none",e.style.display="flex"},closeTaskPopup:()=>{const t=document.querySelector(".add-task-btn"),e=document.querySelector(".task-popup"),o=document.querySelectorAll(".task-popup>input");t.style.display="block",e.style.display="none",o.forEach((t=>t.value=null))},openProject:(t,e)=>{n.loadProjectContent(t),console.log("this btn",e)},addProject:()=>{const t=document.querySelector(".project-popup-input").value,o=e(t);s.addProject(o),n.createNewProject(o.getName()),n.closeProjectPopup()},createNewProject:t=>{document.querySelector(".projects-container").innerHTML+=`<button id="${t}-btn" class="project-btn">${t}</button>`,n.initProjectButtons()},loadProjects:()=>{s.getTodoList().getProjects().forEach((t=>{"Home"!==t.getName()&&"Today"!==t.getName()&&"This week"!==t.getName()&&n.createNewProject(t.getName())})),n.initProjectButtons()},openProjectPopup:()=>{const t=document.querySelector(".add-project-btn"),e=document.querySelector(".project-popup");t.style.display="none",e.style.display="flex"},closeProjectPopup:()=>{const t=document.querySelector(".add-project-btn"),e=document.querySelector(".project-popup"),o=document.querySelector(".project-popup-input");t.style.display="block",e.style.display="none",o.value=""},initAddTaskButtons:()=>{const t=document.querySelector(".add-task-btn"),e=document.querySelector(".task-popup-add-btn"),o=document.querySelector(".task-popup-cancel-btn");t.addEventListener("click",n.openTaskPopup),e.addEventListener("click",n.addTask),o.addEventListener("click",n.closeTaskPopup)},initAddProjectButtons:()=>{const t=document.querySelector(".add-project-btn"),e=document.querySelector(".project-popup-add-btn"),o=document.querySelector(".project-popup-cancel-btn");t.addEventListener("click",n.openProjectPopup),e.addEventListener("click",n.addProject),o.addEventListener("click",n.closeProjectPopup)},initProjectButtons:()=>{document.querySelector("#home-btn"),document.querySelector("#today-btn"),document.querySelector("#this-week-btn"),document.querySelectorAll(".project-btn").forEach((t=>{t.addEventListener("click",n.handleProjectButtons)}))},handleProjectButtons:t=>{const e=t.target.textContent;n.openProject(e)}},c=n;document.addEventListener("DOMContentLoaded",c.loadHomePage)})();