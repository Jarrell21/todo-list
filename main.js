(()=>{"use strict";const e=e=>({getTitle:()=>e,title:e}),t=e=>{let t=[];return{projectName:e,tasks:t,setTasks:e=>{t=e},getName:()=>e,getTasks:()=>t,addTask:e=>{t.push(e)}}},o={getTodoList:()=>{console.log("PARSE",JSON.parse(localStorage.getItem("todoList")));const o=Object.assign((()=>{let e=[];return e.push(t("Todos")),e.push(t("Today")),e.push(t("This week")),{projects:e,getProjects:()=>e,getProject:t=>e.find((e=>e.getName()===t)),addProject:t=>{e.push(t)},setProjects:t=>{e=t}}})(),JSON.parse(localStorage.getItem("todoList")));return console.log("ASSIGNED",JSON.stringify(o)),o.setProjects(o.getProjects().map((e=>Object.assign(t(),e)))),console.log("SET",JSON.stringify(o)),o.getProjects().forEach((t=>t.setTasks(t.getTasks().map((t=>Object.assign(e(),t)))))),console.log("LOCAL",localStorage.getItem("todoList")),console.log("GET",JSON.stringify(o)),o},saveTodoList:e=>{localStorage.setItem("todoList",JSON.stringify(e)),console.log("SAVED",JSON.stringify(e))},addTask:(e,t)=>{const n=o.getTodoList();n.getProject(e).addTask(t),o.saveTodoList(n)},addProject:e=>{const t=o.getTodoList();t.addProject(e),o.saveTodoList(t)}},n=o,c={loadProjectContent:e=>{const t=document.querySelector("#content");t.innerHTML=`\n        <div id="content-title">${e}</div>`;const o=document.createElement("div");o.setAttribute("id","content-body"),o.appendChild((e=>{const t=document.createElement("div");return t.classList.add("tasks"),n.getTodoList().getProject(e).getTasks().forEach((e=>{const o=document.createElement("div");o.textContent=e,t.appendChild(o)})),t})(e)),t.appendChild(o),"Today"!==e&&"This week"!==e&&(o.appendChild(c.addTaskButton()),o.appendChild(c.addTaskPopup(e))),c.closeProjectPopup()},addTaskButton:()=>{const e=document.createElement("button");return e.classList.add("add-task-btn"),e.textContent="Add Task",e.addEventListener("click",c.openTaskPopup),e},addTaskPopup:t=>{const o=document.createElement("div"),s=document.createElement("input"),d=document.createElement("div"),a=document.createElement("button"),r=document.createElement("button");return a.textContent="ADD",r.textContent="CANCEL",o.classList.add("task-popup"),s.classList.add("task-popup-title"),d.classList.add("task-popup-btns"),a.classList.add("task-popup-add-btn"),r.classList.add("task-popup-cancel-btn"),a.addEventListener("click",(()=>{document.querySelector("#content");const o=document.querySelector(".task-popup-title").value;n.addTask(t,e(o)),c.closeTaskPopup(),c.createNewTask(o)})),r.addEventListener("click",c.closeTaskPopup),o.appendChild(s),o.appendChild(d),d.appendChild(a),d.appendChild(r),o.style.display="none",o},createNewTask:e=>{const t=document.querySelector(".tasks"),o=document.createElement("div");o.textContent=e,t.appendChild(o)},openTaskPopup:()=>{const e=document.querySelector(".add-task-btn"),t=document.querySelector(".task-popup");e.style.display="none",t.style.display="flex"},closeTaskPopup:()=>{const e=document.querySelector(".add-task-btn"),t=document.querySelector(".task-popup"),o=document.querySelector(".task-popup-title");e.style.display="block",t.style.display="none",o.value=""},addProject:()=>{const e=document.querySelector(".project-popup-input").value;n.addProject(t(e)),c.createNewProject(e),c.closeProjectPopup()},createNewProject:e=>{const t=document.querySelector(".projects-container"),o=document.createElement("button");o.textContent=e,o.classList.add("project"),o.addEventListener("click",(()=>{c.loadProjectContent(e)})),t.appendChild(o)},openProjectPopup:()=>{const e=document.querySelector(".add-project-btn"),t=document.querySelector(".project-popup");e.style.display="none",t.style.display="flex"},closeProjectPopup:()=>{const e=document.querySelector(".add-project-btn"),t=document.querySelector(".project-popup"),o=document.querySelector(".project-popup-input");e.style.display="block",t.style.display="none",o.value=""}};document.querySelectorAll(".project-btn").forEach((e=>{const t=e.textContent;e.addEventListener("click",(()=>{c.loadProjectContent(t)}))})),document.querySelector(".add-project-btn").addEventListener("click",c.openProjectPopup),document.querySelector(".project-popup-add-btn").addEventListener("click",c.addProject),document.querySelector(".project-popup-cancel-btn").addEventListener("click",c.closeProjectPopup);const s=c;document.addEventListener("DOMContentLoaded",s.loadProjectContent("Todos"))})();